import{_ as x,j as b,c as l,a as s,t as a,F as d,g as _,b as f,w,r as u,o as n,p as y,e as I}from"./index-C2i99ZDD.js";import{A as k}from"./swal-B5kY2fsR.js";import{_ as D,a as S}from"./star_empty-B9KiXxT8.js";import"./sweetalert2.all-q_Iqk2rt.js";const j=""+new URL("../icons/masonry.svg",import.meta.url).href,L={data(){return{vt_url:"",videoID:"",ytlink:"",imgs:[],visible:!1,index:0,movieId:"",movieInfo:{}}},mounted(){this.getMovie()},watch:{"$route.params":{immediate:!0,handler(){this.$route.params.id&&this.getMovie()}}},methods:{getMovie(){this.movieId=this.$route.params.id;const t=`http://localhost:3001/movies/${this.movieId}`;b.get(t).then(i=>{console.log(i),this.movieInfo=i.data,this.vt_url=`https://www.youtube.com/watch?v=${i.data.videoId}`,this.imgs=i.data.images,this.ytlink=`https://www.youtube.com/embed/${i.data.videoId}`,this.change_yt()}).catch(()=>{k.toastTop("err","載入失敗")})},showImg(t){this.index=t,this.visible=!0},change_yt(){let t=this.vt_url;const m=new URLSearchParams(t.split("?")[1]).get("v");if(m!=null)this.videoID=m;else{t.indexOf("?")!==-1&&(t=t.split("?")[0]);const e=t.indexOf("youtu.be"),r=t.indexOf("embed");e!==-1?this.videoID=t.split("youtu.be/")[1]:r!==-1?this.videoID=t.split("embed/")[1]:this.videoID=""}this.ytlink="https://www.youtube.com/embed/"+this.videoID},handleHide(){this.visible=!1}}},o=t=>(y("data-v-12882592"),t=t(),I(),t),C={class:"d-flex flex-column flex-lg-row py-8"},H={class:"col-12 col-lg-5 justify-content-center me-lg-5 mb-5 mb-lg-0"},M={class:"d-flex justify-content-center"},V=["src"],B={class:"col-12 col-lg-6"},E={class:"d-flex flex-column text-white"},N={class:"d-flex flex-column align-items-center align-items-lg-start"},O={class:"mb-2"},P={class:"text-uppercase"},A={class:"d-flex justify-content-start my-4"},F=o(()=>s("img",{src:D,alt:"star-full",class:"star"},null,-1)),R=[F],U=o(()=>s("img",{src:S,alt:"star-empty",class:"star"},null,-1)),T=[U],q=o(()=>s("button",{class:"btn-view mb-8"},[s("div",{class:"text-view"},"查看影評")],-1)),z=o(()=>s("p",{class:"fw-bold"},"電影簡介:",-1)),G={class:"movie-intro"},J=o(()=>s("hr",null,null,-1)),K={class:"d-flex flex-row mb-2"},Q=o(()=>s("span",{class:"fw-bold"},"導演：",-1)),W={class:"d-flex flex-row"},X=o(()=>s("span",{class:"fw-bold"},"主演：",-1)),Y={class:"trailer-container text-white my-4 px-4 py-4"},Z=o(()=>s("div",{class:"d-flex flex-row mb-3"},[s("i",{class:"bi bi-play-fill fs-3 me-2"}),s("h3",{class:"pt-1"},"預告片")],-1)),$={class:"d-flex justify-content-center mb-3"},ss=["src"],ts={class:"text-white my-14"},es={class:"still-container px-4 py-5"},os=o(()=>s("div",{class:"d-flex flex-row"},[s("img",{src:j,alt:"masonry",width:"25",height:"25",class:"pt-1"}),s("h3",{class:"ms-2 mb-5"},"劇照")],-1)),is={class:"d-flex flex-column flex-lg-row justufy-content-center"},ls=["onClick"],ns=["src"];function cs(t,i,m,p,e,r){const v=u("router-link"),g=u("VueEasyLightbox");return n(),l(d,null,[s("section",C,[s("div",H,[s("div",M,[s("img",{src:e.movieInfo.image,alt:"電影海報",class:"poster"},null,8,V)])]),s("div",B,[s("div",E,[s("div",N,[s("h2",O,a(e.movieInfo.name),1),s("h2",P,a(e.movieInfo.englishName),1),s("div",A,[(n(!0),l(d,null,_(e.movieInfo.ratingStars,c=>(n(),l("span",{key:c+123,class:"me-lg-1"},R))),128)),(n(!0),l(d,null,_(5-e.movieInfo.ratingStars,c=>(n(),l("span",{key:c+123,class:"me-lg-1"},T))),128))]),f(v,{to:`posts/${e.movieInfo.id}`},{default:w(()=>[q]),_:1},8,["to"])]),z,s("p",G,a(e.movieInfo.intro),1),J,s("div",K,[Q,s("span",null,a(e.movieInfo.staff.director),1)]),s("div",W,[X,s("span",null,a(e.movieInfo.staff.actor),1)])])])]),s("section",Y,[Z,s("div",$,[s("iframe",{src:e.ytlink,title:"",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"",class:"player"},null,8,ss)])]),s("section",ts,[s("div",es,[os,s("div",null,[f(g,{visible:e.visible,imgs:e.imgs,index:e.index,onHide:r.handleHide},null,8,["visible","imgs","index","onHide"])]),s("div",is,[(n(!0),l(d,null,_(e.imgs,(c,h)=>(n(),l("div",{key:h,class:"mx-auto",onClick:as=>r.showImg(h)},[s("img",{src:c,class:"still mx-1 mb-3"},null,8,ns)],8,ls))),128))])])])],64)}const hs=x(L,[["render",cs],["__scopeId","data-v-12882592"]]);export{hs as default};
