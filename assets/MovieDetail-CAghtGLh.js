import{_ as p,j as v,c as i,a as s,t as a,F as d,g as _,b as g,r as x,o as l,p as b,e as y}from"./index-DawJ1BI_.js";import{A as w}from"./swal-CgCBNzUO.js";import{_ as I,a as k}from"./star_empty-B9KiXxT8.js";import"./sweetalert2.all-DAVblDkr.js";const D=""+new URL("../icons/masonry.svg",import.meta.url).href,S={data(){return{vt_url:"",videoID:"",ytlink:"",imgs:[],visible:!1,index:0,movieId:"",movieInfo:{}}},mounted(){this.change_yt(),this.getMovie()},watch:{"$route.params":{immediate:!0,handler(){this.$route.params.id&&this.getMovie()}}},methods:{getMovie(){this.movieId=this.$route.params.id;const e=`http://localhost:3001/movies/${this.movieId}`;v.get(e).then(n=>{console.log(n),this.movieInfo=n.data,this.vt_url=`https://www.youtube.com/watch?v=${n.data.videoId}`,this.imgs=n.data.images}).catch(()=>{w.toastTop("err","載入失敗")})},showImg(e){this.index=e,this.visible=!0},change_yt(){let e=this.vt_url;const m=new URLSearchParams(e.split("?")[1]).get("v");if(m!=null)this.videoID=m;else{e.indexOf("?")!==-1&&(e=e.split("?")[0]);const t=e.indexOf("youtu.be"),r=e.indexOf("embed");t!==-1?this.videoID=e.split("youtu.be/")[1]:r!==-1?this.videoID=e.split("embed/")[1]:this.videoID=""}this.ytlink="https://www.youtube.com/embed/"+this.videoID},handleHide(){this.visible=!1}}},o=e=>(b("data-v-913a03ba"),e=e(),y(),e),j={class:"d-flex flex-column flex-lg-row py-8"},L={class:"col-12 col-lg-5 justify-content-center me-lg-5 mb-5 mb-lg-0"},H={class:"d-flex justify-content-center"},M=["src"],V={class:"col-12 col-lg-6"},B={class:"d-flex flex-column text-white"},C={class:"d-flex flex-column align-items-center align-items-lg-start"},E={class:"mb-2"},N={class:"text-uppercase"},O={class:"d-flex justify-content-start my-4"},P=o(()=>s("img",{src:I,alt:"star-full",class:"star"},null,-1)),A=[P],F=o(()=>s("img",{src:k,alt:"star-empty",class:"star"},null,-1)),R=[F],U=o(()=>s("button",{class:"btn-view mb-8"},[s("div",{class:"text-view"},"查看影評")],-1)),T=o(()=>s("p",{class:"fw-bold"},"電影簡介:",-1)),q={class:"movie-intro"},z=o(()=>s("hr",null,null,-1)),G={class:"d-flex flex-row mb-2"},J=o(()=>s("span",{class:"fw-bold"},"導演：",-1)),K={class:"d-flex flex-row"},Q=o(()=>s("span",{class:"fw-bold"},"主演：",-1)),W={class:"trailer-container text-white my-4 px-4 py-4"},X=o(()=>s("div",{class:"d-flex flex-row mb-3"},[s("i",{class:"bi bi-play-fill fs-3 me-2"}),s("h3",{class:"pt-1"},"預告片")],-1)),Y={class:"d-flex justify-content-center mb-3"},Z=["src"],$={class:"text-white my-14"},ss={class:"still-container px-4 py-5"},es=o(()=>s("div",{class:"d-flex flex-row"},[s("img",{src:D,alt:"masonry",width:"25",height:"25",class:"pt-1"}),s("h3",{class:"ms-2 mb-5"},"劇照")],-1)),ts={class:"d-flex flex-column flex-lg-row justufy-content-center"},os=["onClick"],is=["src"];function ls(e,n,m,f,t,r){const u=x("VueEasyLightbox");return l(),i(d,null,[s("section",j,[s("div",L,[s("div",H,[s("img",{src:t.movieInfo.image,alt:"電影海報",class:"poster"},null,8,M)])]),s("div",V,[s("div",B,[s("div",C,[s("h2",E,a(t.movieInfo.name),1),s("h2",N,a(t.movieInfo.englishName),1),s("div",O,[(l(!0),i(d,null,_(t.movieInfo.ratingStars,c=>(l(),i("span",{key:c+123,class:"me-lg-1"},A))),128)),(l(!0),i(d,null,_(5-t.movieInfo.ratingStars,c=>(l(),i("span",{key:c+123,class:"me-lg-1"},R))),128))]),U]),T,s("p",q,a(t.movieInfo.intro),1),z,s("div",G,[J,s("span",null,a(t.movieInfo.staff.director),1)]),s("div",K,[Q,s("span",null,a(t.movieInfo.staff.actor),1)])])])]),s("section",W,[X,s("div",Y,[s("iframe",{src:t.ytlink,title:"",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"",class:"player"},null,8,Z)])]),s("section",$,[s("div",ss,[es,s("div",null,[g(u,{visible:t.visible,imgs:t.imgs,index:t.index,onHide:r.handleHide},null,8,["visible","imgs","index","onHide"])]),s("div",ts,[(l(!0),i(d,null,_(t.imgs,(c,h)=>(l(),i("div",{key:h,class:"mx-auto",onClick:ns=>r.showImg(h)},[s("img",{src:c,class:"still mx-1 mb-3"},null,8,is)],8,os))),128))])])])],64)}const ms=p(S,[["render",ls],["__scopeId","data-v-913a03ba"]]);export{ms as default};
