import{_ as b,l as v,i as w,c as V,a as e,b as l,w as x,r as f,o as g,q as d,p as k,e as y}from"./index-ucjp9Iw5.js";import{S as h}from"./sweetalert2.all-SHDf0T5L.js";import{u as N}from"./userStore-C41xysg6.js";const P={data(){return{form:{user:{email:"",userName:"",phone:"",password:""}}}},methods:{...v(N,["setUser","setUserCookie"]),signUp(){const s="https://two023-vue3-moviegalaxy.onrender.com/register",o={email:this.form.user.email,userName:this.form.user.userName,phone:this.form.user.phone,password:this.form.user.password,role:"user"};w.post(s,o).then(a=>{this.setUserCookie(a.data.user.id,a.data.accessToken,a.data.user.role),h.fire({title:"註冊成功",text:`歡迎${a.data.user.userName}加入影評星塵會員！`,icon:"success"}),this.$bus.emit("login-success"),this.$router.push("/")}).catch(a=>{var p;h.fire({title:((p=a.response)==null?void 0:p.data)||"註冊失敗",text:"",icon:"error"}),console.log(a)})},isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"請輸入正確的手機號碼"},isPassword(s){return/(?=.*[0-9])(?=.*[a-zA-Z]).{6,12}/.test(s)?!0:"密碼長度為 6 ~ 12 碼，需包含英文及數字"},checkPwd(s){return s===this.form.user.password?!0:"密碼不一致"}}},n=s=>(k("data-v-42374683"),s=s(),y(),s),U={class:"row justify-content-center my-6"},S={class:"login-container d-flex flex-column justify-content-center align-items-center py-5"},E=n(()=>e("h2",null,"註冊帳號",-1)),C={class:"col-6"},F={class:"mb-3"},I=n(()=>e("label",{for:"email",class:"form-label me-2"},"Email",-1)),j={class:"mb-3"},q=n(()=>e("label",{for:"userName",class:"form-label me-2"},"名稱",-1)),B={class:"mb-3"},z=n(()=>e("label",{for:"phone",class:"form-label me-2"},"手機號碼",-1)),A={class:"mb-3"},M=n(()=>e("label",{for:"password",class:"form-label me-2"},"密碼",-1)),D={class:"mb-4"},T=n(()=>e("label",{for:"checkPwd",class:"form-label me-2"},"確認密碼",-1)),Z=n(()=>e("button",{type:"submit",class:"btn-signup"},[e("div",{class:"text-signup"},"註冊")],-1));function G(s,o,a,p,t,u){const i=f("VField"),m=f("ErrorMessage"),_=f("VForm");return g(),V("div",U,[e("div",S,[E,e("div",C,[l(_,{onSubmit:u.signUp,class:"d-flex flex-column justify-content-center align-items-center"},{default:x(({errors:c})=>[e("div",F,[I,l(i,{id:"email",name:"Email",type:"email",class:d(["form-control",{"is-invalid":c.Email}]),placeholder:"請輸入電子信箱",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":o[0]||(o[0]=r=>t.form.user.email=r)},null,8,["class","modelValue"]),l(m,{name:"Email",class:"invalid-feedback"})]),e("div",j,[q,l(i,{id:"userName",name:"名稱",type:"text",class:d(["form-control",{"is-invalid":c.名稱}]),placeholder:"請輸入名稱",rules:"required|min:2|max:15",modelValue:t.form.user.userName,"onUpdate:modelValue":o[1]||(o[1]=r=>t.form.user.userName=r)},null,8,["class","modelValue"]),l(m,{name:"名稱",class:"invalid-feedback"})]),e("div",B,[z,l(i,{id:"phone",name:"手機號碼",type:"text",class:d(["form-control",{"is-invalid":c.手機號碼}]),placeholder:"請輸入手機號碼",rules:u.isPhone,modelValue:t.form.user.phone,"onUpdate:modelValue":o[2]||(o[2]=r=>t.form.user.phone=r)},null,8,["class","rules","modelValue"]),l(m,{name:"手機號碼",class:"invalid-feedback"})]),e("div",A,[M,l(i,{id:"password",name:"密碼",type:"password",class:d(["form-control",{"is-invalid":c.密碼}]),placeholder:"請輸入密碼",rules:u.isPassword,autocomplete:"false",modelValue:t.form.user.password,"onUpdate:modelValue":o[3]||(o[3]=r=>t.form.user.password=r)},null,8,["class","rules","modelValue"]),l(m,{name:"密碼",class:"invalid-feedback"})]),e("div",D,[T,l(i,{id:"checkPwd",name:"確認密碼",type:"password",class:d(["form-control",{"is-invalid":c.確認密碼}]),placeholder:"請再次輸入密碼",rules:u.checkPwd,autocomplete:"false"},null,8,["class","rules"]),l(m,{name:"確認密碼",class:"invalid-feedback"})]),Z]),_:1},8,["onSubmit"])])])])}const L=b(P,[["render",G],["__scopeId","data-v-42374683"]]);export{L as default};
