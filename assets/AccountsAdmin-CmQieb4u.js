import{_ as h,o as n,c,a as t,d as u,t as l,i as m,F as _,j as g,b as $,r as f,p as v,e as x}from"./index-3RIVRUOS.js";import{m as A}from"./modalMixin-Y75er8yH.js";const y={props:["tempUser"],data(){return{}},mixins:[A]},M={class:"modal fade",ref:"modal",tabindex:"-1"},w={class:"modal-dialog"},D={class:"modal-content"},U=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{class:"modal-title"},"刪除帳戶"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},C={class:"text-danger"},N={class:"modal-footer"},I=t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function S(s,e,r,b,a,d){return n(),c("div",M,[t("div",w,[t("div",D,[U,t("div",k,[t("p",null,[u(" 是否刪除 "),t("strong",C,l(r.tempUser.userName),1),u(" 帳戶？ (刪除後無法恢復) ")])]),t("div",N,[I,t("button",{type:"button",class:"btn btn-danger",onClick:e[0]||(e[0]=i=>s.$emit("delAccount"))},"刪除")])])])],512)}const B=h(y,[["render",S]]),V={data(){return{users:[],tempUser:{}}},components:{DelAccountModal:B},mounted(){this.getUsers()},methods:{getUsers(){m.get("https://two023-vue3-moviegalaxy.onrender.com/users").then(e=>{console.log(e),this.users=e.data,console.log(this.users)}).catch(e=>{console.log(e)})},openModal(s){this.tempUser={...s},this.$refs.DelAccountModal.openModal()},delAccount(){const s=`https://two023-vue3-moviegalaxy.onrender.com/users/${this.tempUser.id}`;m.delete(s).then(e=>{console.log(e),this.$refs.DelAccountModal.closeModal(),this.getUsers()}).catch(e=>{console.log(e)})}}},p=s=>(v("data-v-f043418c"),s=s(),x(),s),j={class:"row justify-content-center"},F={class:"col-md-11"},E=p(()=>t("h2",{class:"mb-4"},"帳戶管理",-1)),L={class:"table mx-2"},T=p(()=>t("thead",{class:"table-light"},[t("tr",null,[t("th",{width:"120"},"身分"),t("th",{width:"120"},"名稱"),t("th",{width:"120"},"電子信箱"),t("th",{width:"120",class:"text-center"},"刪除帳戶")])],-1)),q={class:"text-center"},z=["onClick"];function G(s,e,r,b,a,d){const i=f("Del-Account-Modal");return n(),c(_,null,[t("div",j,[t("div",F,[E,t("table",L,[T,t("tbody",null,[(n(!0),c(_,null,g(a.users,o=>(n(),c("tr",{key:o.id},[t("td",null,l(o.role),1),t("td",null,l(o.userName),1),t("td",null,l(o.email),1),t("td",q,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:H=>d.openModal(o)}," 刪除 ",8,z)])]))),128))])])])]),$(i,{ref:"DelAccountModal","temp-user":a.tempUser,onDelAccount:d.delAccount},null,8,["temp-user","onDelAccount"])],64)}const O=h(V,[["render",G],["__scopeId","data-v-f043418c"]]);export{O as default};
